Count query for manually declared queries (either @Query or NamedQuery) get pagination applied
When executing a paging query the executing infrastructure triggers a count query to compute the number of overall results. If you define the query manually by using @Query or via a JPA NamedQuery the count query generation seems to also get the pagination information applied (see forum post for example).
This seems to boil down to SimpleJpaQuery.createCountQuery(...) calling ParameterBinder.bindAndPrepare(...) instead of prepare(...) as the former call applies pagination information to the query.