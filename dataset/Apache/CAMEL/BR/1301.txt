NPE in FactoryFinder.findClass when context classloader is null
My program works fine, when I run it as a normal Windows app.  But when I try to run it as a service, it throws a "Could not auto create component: http" which is caused by a NullPointerException which is caused by Thread.currentThread().getContextClassLoader() returning null.
A quick search found this ActiveMQ bug: http://issues.apache.org/activemq/browse/AMQ-1229 which is essentially identical.  If it&amp;apos;s been fixed in ActiveMQ, probably you can just merge the fix from org.apache.activemq.util.FactoryFinder into org.apache.camel.util.FactoryFinder.
Incidentally, the fact that the context classloader is null has also been reported as a bug: http://issues.apache.org/jira/browse/DAEMON-100