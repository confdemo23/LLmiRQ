pollEnrich does not work with queue and quartz or timer endpoints
Hi,
In the following route example, the pollenrich processor is never called

            &lt;camel:from uri="quartz://x3sReporting/clientError?cron=0+0/5+9-18+?+*+MON-FRI"/&gt;
            &lt;camel:pollEnrich uri="queuingservice:x3s:reporting" strategyRef="queueAggregator"/&gt;

            &lt;camel:transacted ref="PROPAGATION_REQUIRED_NEW" /&gt;
            &lt;camel:choice&gt;
                &lt;camel:when&gt;
                    &lt;camel:simple&gt;${body} != null&lt;/camel:simple&gt;
                    &lt;camel:doTry&gt;
                        &lt;camel:marshal ref="csvAuditBindyDataFormat" /&gt;


Definiton of the AggregationStrategy class used

public class QueueAggregator implements AggregationStrategy {
   
    private static final transient Log LOG = LogFactory.getLog(QueueAggregator.class);

    public Exchange aggregate(Exchange oldExchange, Exchange newExchange) {
        if (newExchange == null) {
            LOG.info("Old object received (null exchange) : " + oldExchange.getIn().getBody().toString());
            return oldExchange;
        }
        Object oldBody = oldExchange.getIn().getBody();
        LOG.info("Old object received : " + oldBody.toString());
        Object newBody = newExchange.getIn().getBody();
        LOG.info("New object received : " + newBody.toString());
        oldExchange.getIn().setBody(newBody);
        return oldExchange;
    }
}


Unfortunately, the aggregator is not called (no info trace in the LOG) and the body object send to the endpoint (marshall) is of type org.quartz.JobDetail

11:10:02,703 | INFO  | heduler_Worker-1 | TraceInterceptor                 | rg.apache.camel.processor.Logger   88 | ID-dell-charles-3372-1251127950838-0-10 &gt;&gt;&gt; from(quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI) --&gt; ref:PROPAGATION_REQUIRED_NEW, Pattern:InOnly, Headers:{triggerGroup=x3sReporting, jobInstance=org.apache.camel.component.quartz.CamelJob@1264f27, nextFireTime=Tue Aug 25 11:15:00 CEST 2009, previousFireTime=null, jobDetail=JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false, triggerName=clientError, trigger=Trigger &amp;apos;x3sReporting.clientError&amp;apos;:  triggerClass: &amp;apos;org.quartz.CronTrigger isVolatile: false calendar: &amp;apos;null&amp;apos; misfireInstruction: 0 nextFireTime: Tue Aug 25 11:15:00 CEST 2009, scheduler=org.quartz.impl.StdScheduler@16975d, jobRunTime=-1, scheduledFireTime=Tue Aug 25 11:10:00 CEST 2009, result=null, calendar=null, mergedJobDataMap=org.quartz.JobDataMap@ccc462dc, refireCount=0, fireTime=Tue Aug 25 11:10:00 CEST 2009}, BodyType:org.quartz.JobDetail, Body:JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false
11:10:02,718 | INFO  | heduler_Worker-1 | TraceInterceptor                 | rg.apache.camel.processor.Logger   88 | ID-dell-charles-3372-1251127950838-0-10 &gt;&gt;&gt; ref:PROPAGATION_REQUIRED_NEW --&gt; Choice, Pattern:InOnly, Headers:{triggerGroup=x3sReporting, jobInstance=org.apache.camel.component.quartz.CamelJob@1264f27, nextFireTime=Tue Aug 25 11:15:00 CEST 2009, previousFireTime=null, jobDetail=JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false, triggerName=clientError, trigger=Trigger &amp;apos;x3sReporting.clientError&amp;apos;:  triggerClass: &amp;apos;org.quartz.CronTrigger isVolatile: false calendar: &amp;apos;null&amp;apos; misfireInstruction: 0 nextFireTime: Tue Aug 25 11:15:00 CEST 2009, scheduler=org.quartz.impl.StdScheduler@16975d, jobRunTime=-1, scheduledFireTime=Tue Aug 25 11:10:00 CEST 2009, result=null, calendar=null, mergedJobDataMap=org.quartz.JobDataMap@ccc462dc, refireCount=0, fireTime=Tue Aug 25 11:10:00 CEST 2009}, BodyType:org.quartz.JobDetail, Body:JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false
11:10:02,734 | INFO  | heduler_Worker-1 | TraceInterceptor                 | rg.apache.camel.processor.Logger   88 | ID-dell-charles-3372-1251127950838-0-10 &gt;&gt;&gt; Choice --&gt; Try, Pattern:InOnly, Headers:{triggerGroup=x3sReporting, jobInstance=org.apache.camel.component.quartz.CamelJob@1264f27, nextFireTime=Tue Aug 25 11:15:00 CEST 2009, previousFireTime=null, jobDetail=JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false, triggerName=clientError, trigger=Trigger &amp;apos;x3sReporting.clientError&amp;apos;:  triggerClass: &amp;apos;org.quartz.CronTrigger isVolatile: false calendar: &amp;apos;null&amp;apos; misfireInstruction: 0 nextFireTime: Tue Aug 25 11:15:00 CEST 2009, scheduler=org.quartz.impl.StdScheduler@16975d, jobRunTime=-1, scheduledFireTime=Tue Aug 25 11:10:00 CEST 2009, result=null, calendar=null, mergedJobDataMap=org.quartz.JobDataMap@ccc462dc, refireCount=0, fireTime=Tue Aug 25 11:10:00 CEST 2009}, BodyType:org.quartz.JobDetail, Body:JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false
11:10:02,734 | INFO  | heduler_Worker-1 | TraceInterceptor                 | rg.apache.camel.processor.Logger   88 | ID-dell-charles-3372-1251127950838-0-10 &gt;&gt;&gt; Try --&gt;, Pattern:InOnly, Headers:{triggerGroup=x3sReporting, jobInstance=org.apache.camel.component.quartz.CamelJob@1264f27, nextFireTime=Tue Aug 25 11:15:00 CEST 2009, previousFireTime=null, jobDetail=JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false, triggerName=clientError, trigger=Trigger &amp;apos;x3sReporting.clientError&amp;apos;:  triggerClass: &amp;apos;org.quartz.CronTrigger isVolatile: false calendar: &amp;apos;null&amp;apos; misfireInstruction: 0 nextFireTime: Tue Aug 25 11:15:00 CEST 2009, scheduler=org.quartz.impl.StdScheduler@16975d, jobRunTime=-1, scheduledFireTime=Tue Aug 25 11:10:00 CEST 2009, result=null, calendar=null, mergedJobDataMap=org.quartz.JobDataMap@ccc462dc, refireCount=0, fireTime=Tue Aug 25 11:10:00 CEST 2009}, BodyType:org.quartz.JobDetail, Body:JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false
11:10:03,171 | INFO  | heduler_Worker-1 | TraceInterceptor                 | rg.apache.camel.processor.Logger  166 | ID-dell-charles-3372-1251127950838-0-10 &gt;&gt;&gt; Try --&gt;, Pattern:InOnly, Headers:{triggerGroup=x3sReporting, jobInstance=org.apache.camel.component.quartz.CamelJob@1264f27, nextFireTime=Tue Aug 25 11:15:00 CEST 2009, previousFireTime=null, jobDetail=JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false, triggerName=clientError, trigger=Trigger &amp;apos;x3sReporting.clientError&amp;apos;:  triggerClass: &amp;apos;org.quartz.CronTrigger isVolatile: false calendar: &amp;apos;null&amp;apos; misfireInstruction: 0 nextFireTime: Tue Aug 25 11:15:00 CEST 2009, scheduler=org.quartz.impl.StdScheduler@16975d, jobRunTime=-1, scheduledFireTime=Tue Aug 25 11:10:00 CEST 2009, result=null, calendar=null, mergedJobDataMap=org.quartz.JobDataMap@ccc462dc, refireCount=0, fireTime=Tue Aug 25 11:10:00 CEST 2009}, BodyType:org.quartz.JobDetail, Body:JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false, Exception: java.lang.ClassCastException: org.quartz.JobDetail
11:10:03,171 | INFO  | heduler_Worker-1 | TraceInterceptor                 | rg.apache.camel.processor.Logger   88 | ID-dell-charles-3372-1251127950838-0-11 &gt;&gt;&gt;  --&gt; log://com.xpectis.x3s?level=INFO&amp;multiline=true&amp;showCaughtException=true&amp;showException=true&amp;showStackTrace=true, Pattern:InOnly, Headers:{calendar=null, scheduledFireTime=Tue Aug 25 11:10:00 CEST 2009, trigger=Trigger &amp;apos;x3sReporting.clientError&amp;apos;:  triggerClass: &amp;apos;org.quartz.CronTrigger isVolatile: false calendar: &amp;apos;null&amp;apos; misfireInstruction: 0 nextFireTime: Tue Aug 25 11:15:00 CEST 2009, triggerGroup=x3sReporting, previousFireTime=null, jobRunTime=-1, jobDetail=JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false, result=null, triggerName=clientError, fireTime=Tue Aug 25 11:10:00 CEST 2009, mergedJobDataMap=org.quartz.JobDataMap@ccc462dc, jobInstance=org.apache.camel.component.quartz.CamelJob@1264f27, scheduler=org.quartz.impl.StdScheduler@16975d, refireCount=0, nextFireTime=Tue Aug 25 11:15:00 CEST 2009}, BodyType:org.quartz.JobDetail, Body:JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false
11:10:03,187 | INFO  | heduler_Worker-1 | x3s                              | rg.apache.camel.processor.Logger   88 | Exchange[
, BodyType:org.quartz.JobDetail
, Body:JobDetail &amp;apos;DEFAULT.quartz://x3sReporting/clientError?cron=0+0%2F5+9-18+%3F+*+MON-FRI&amp;apos;:  jobClass: &amp;apos;org.apache.camel.component.quartz.CamelJob isStateful: false isVolatile: false isDurable: false requestsRecovers: false
, CaughtExceptionType:java.lang.ClassCastException, CaughtExceptionMessage:org.quartz.JobDetail, StackTrace:java.lang.ClassCastException: org.quartz.JobDetail
    at org.apache.camel.dataformat.bindy.csv.BindyCsvDataFormat.marshal(BindyCsvDataFormat.java:60)

