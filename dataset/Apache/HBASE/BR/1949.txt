KeyValue expiration by Time-to-Live during major compaction is broken
During a major compaction on a region in a column family with a configured TTL, it looks like all KeyValues in a row after the first expired KeyValue are skipping and thrown out of the newly written file (regardless of whether the would have been expired or not).
The StoreScanner is skipping to the next row, even when other columns with a non-expirable timestamp exists.  Unless I&amp;apos;m misunderstanding it, it seems like it should just seek to the next column instead.  I discovered this when altering a table to lower the TTL for a column family and force the expiration of some data which led to the entire row being expired in some instances.