ConfigurationFile.snapshot() stores the wrong file when config persistence is disabled
ConfigurationFile.snapshot() always uses mainFile as the source of the snapshot, but when --read-only-server-config and the domain equivalents are used, that file isn&amp;apos;t updated as config changes are made. In this case lastFile should be used.