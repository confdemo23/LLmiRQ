cookie wrapper class could be null even if paging supported
The PagedResultsRequestControl class gas a getCookie method that returns a cookie wrapper class, a PagedResultsCookie.
In some case, seen this happen with Active Directory 2000, PagedResultsRequestControl.getCookie will return null, even though it does support paging. With the same server in other instances you will get a cookie. I guess in some instances Active Directory decides not to return a response control with the search result, even though a request was sent.
The simple solution is simple documentation improvement. The javadoc for PagedResultsRequestControl.getCookie should state that this method could return null. Also, the reference documentation, section 6.3 and example 6.2, should make this clear. Right now section 6.3 implies that PagedResultsRequestControl.getCookie never returns null.
Another solution would be to actually fix the implementation of PagedResultsRequestControl.getCookie and never return null. Not sure if this is the right thing though. This null cookie wrapper is the only signal that the server did not send a control, and this could be valuable. If the code gets refactored and response controls are exposed, then this workaround is not needed anymore.