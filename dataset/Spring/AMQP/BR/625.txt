CachingConnectionFactory onClose notification
The problem is happening when using CachingConnectionFactory with cache mode CacheMode.CHANNEL. When connection is closed for the first time the connection listener is notified normally, but if the connection is recreated and closed again the listener is not notified.
I created a sample project on Github to show this problem: https://github.com/marcospy/spring-amqp-listener-issue.