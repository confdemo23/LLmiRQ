Unable to use @Profile annotation on scanned repository interfaces
The scanner created by RepositoryConfigurationSourceSupport [1] does not set an Environment. This means that @Profile annotations on the scanned repository will be resolved against a new StandardEnvironement which will not have any active profiles.
[1] https://github.com/SpringSource/spring-data-commons/blob/ac256f9921807977fc8baa70054aa52cbcfebe6b/src/main/java/org/springframework/data/repository/config/RepositoryConfigurationSourceSupport.java#L43