RepositoryFactorySupport proxy classloader
The RepositoryFactorySupport.getRepository uses result.getProxy() to create a new proxy. Since the method is called to create a new bean it should probably use the variant that accepts a classloader (obtained via ClassLoaderAware).