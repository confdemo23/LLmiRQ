Id handling of Spring AjaxViewRoot causes problems to RichFaces AjaxViewRoot
There is a serious problem when combining Spring-faces ajax components and Rich faces Ajax components.
This is most easily noticed since 2.0.7, when the jsf view state is saved as part of the flow history. To reproduce open a spring popup view-state using an sf:commandButton and cancel it by pressing Esc or X. After that, no rich-faces ajax requests will be able to work.
The reason seems to be the following: Spring&amp;apos;s AjaxViewRoot effectively replaces in its constructor the ID of the underlying ViewRoot with a newly generated unique id appended by "_ajax". This ID remains in the state of the original ViewRoot even after Spring - AjaxViewRoot has finished its job. RichFaces - AjaxViewRoot relies on its ID to determine which part of the component tree to process. Therefore, since its ID has been replaced, the processing never happens on the whole ViewRoot as it should.
This is also easily reproduced by firing an sf:commandButton action that does not transition to another view. After that request is processed, subsequent rich-faces ajax requests will not work.
You may consider the small patch I am attaching. This should be ok unless you think there are deeper complications here.
Thanks and regards.